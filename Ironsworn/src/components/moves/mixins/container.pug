mixin progressRoll(opts)
  button(
    type="roll"
    title=opts.title
    name=`roll${opts.name}`
    class='hide'
    value=`&{template:ironsworn_progress} {{header=@{character_name}}} {{progress_name=${opts.title}}} {{progress=[[?{Filled Progress|0}]]}} {{challenge1=[[d10]]}} {{challenge2=[[d10]]}}`
  )

mixin oracleRoll(opts)
  button(
    type="roll"
    title=opts.title
    name=`roll${opts.name}`
    class='hide'
    value=`&{template:${opts.type}} {{header=${opts.title}}} {{${opts.name}=[[d100]]}}`
  )

mixin rarityRoll(opts)
  button(
    type="roll"
    title=`${opts.title} Move`
    class='hide'
    name=`roll${opts.name}`
    value!=`&{template:ironsworn_moves} {{header=@{character_name}}} {{name=${opts.title}}} {{rarityAction=[[d6+${opts.stat}+(?{Modifier|0})]]}} {{negate1=[[1+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate2=[[2+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate3=[[3+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate4=[[4+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate5=[[5+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate6=[[6+${opts.stat_repeat}+(?{Modifier|0})]]}} {{challenge1=[[d10]]}} {{challenge2=[[d10]]}} {{momentum=[[@{momentum}]]}} {{modifiers=[[${opts.stat_repeat}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[${opts.stat_repeat}]]}} {{rarityDie6=[[6+${opts.stat_repeat}+(?{Modifier|0})]]}} {{rarityDie5=[[5+${opts.stat_repeat}+(?{Modifier|0})]]}} {{rarityDie1=[[1+${opts.stat_repeat}+(?{Modifier|0})]]}}`
  )

mixin owlRoll(opts)
  button(
    type="roll"
    title=`${opts.title} Move`
    class='hide'
    name=`roll${opts.name}`
    value!=`&{template:ironsworn_moves} {{header=@{character_name}}} {{name=${opts.title}}} {{action=[[d6+${opts.stat}+(?{Modifier|0})]]}} {{owl=[[?{Owl Companion|No&#44;0|Yes&#44;?{Owl's Health&amp;#124;0&amp;#125;&#125;]]}} {{negate1=[[1+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate2=[[2+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate3=[[3+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate4=[[4+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate5=[[5+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate6=[[6+${opts.stat_repeat}+(?{Modifier|0})]]}} {{challenge1=[[d10]]}} {{challenge2=[[d10]]}} {{momentum=[[@{momentum}+(?{Owl Companion})]]}} {{modifiers=[[${opts.stat_repeat}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[${opts.stat_repeat}]]}}`
  )

mixin movesRoll(opts)
  button(
    type="roll"
    title=`${opts.title} Move`
    class='hide'
    name=`roll${opts.name}`
    value!=`&{template:ironsworn_moves} {{header=@{character_name}}} {{name=${opts.title}}} {{action=[[d6+${opts.stat}+(?{Modifier|0})]]}} {{negate1=[[1+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate2=[[2+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate3=[[3+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate4=[[4+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate5=[[5+${opts.stat_repeat}+(?{Modifier|0})]]}} {{negate6=[[6+${opts.stat_repeat}+(?{Modifier|0})]]}} {{challenge1=[[d10]]}} {{challenge2=[[d10]]}} {{momentum=[[@{momentum}]]}} {{modifiers=[[${opts.stat_repeat}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[${opts.stat_repeat}]]}}`
  )

mixin rollLabel
  label.roll-label Roll
    block

mixin rollListLabel
  label.roll-list-label Roll
    block

mixin container(opts)
  input(type='radio' name='attr_move_preview' class=`${opts.class} hide` value=opts.radio)
  div(class=`${opts.class} showhide`)
    div.move-title.move-preview=opts.title
    if opts.roll
      div.roll-viewer
        if opts.progress
          +rollLabel
            +progressRoll(opts)
        else if opts.oracle
          +rollLabel
            +oracleRoll(opts)
        else if opts.rarity
          +rollLabel
            +rarityRoll(opts)
        else if opts.owl
          +rollLabel
            +owlRoll(opts)
        else
          +rollLabel
            +movesRoll(opts)
    div.move-description
      block
    div.oracle-footer.move-page-footer=opts.page

mixin listButton(opts)
  if opts.progress
    +rollListLabel
      +progressRoll(opts)
  else if opts.oracle
    +rollListLabel
      +oracleRoll(opts)
  else if opts.rarity
    +rollListLabel
      +rarityRoll(opts)
  else if opts.owl
    +rollListLabel
      +owlRoll(opts)
  else
    +rollListLabel
      +movesRoll(opts)