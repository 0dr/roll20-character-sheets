// - LETHALITY DAMAGE


mixin lethaldamage(results,mult)
    - const val = parseInt(results)
    - const multfactor= parseInt(mult)
    - const tenths = Math.floor(val/10)
    - const units = val%10
    - const dmgs = (((tenths>0)?tenths:10)+((units>0)?units:10))*multfactor
    |
    | {{#rollTotal() lethality #{val} }}
    .sheet-template-row.sheet-template-tworows
        span.inlinerollresult Normal Damage: 
        span #{dmgs}
    |
    | {{/rollTotal() lethality #{val} }}
    |
mixin lethaldamageor(results,mult)
    - const val = parseInt(results)
    - const multfactor= parseInt(mult)
    - const tenths = Math.floor(val/10)
    - const units = val%10
    - const dmgs = (((tenths>0)?tenths:10)+((units>0)?units:10))*multfactor
    |
    | {{#rollTotal() lethality #{val} }}
    .sheet-template-row.sheet-template-onerow  
        span.inlinerollresult (or damage: #{dmgs})
    |
    | {{/rollTotal() lethality #{val} }}
    |

//- ROLL TEMPLATE
//- ============================= -->
.rolltemplates
  rolltemplate.sheet-rolltemplate-rolls
    .sheet-template-container
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        | {{#name}}
        h1 {{name}} 
        br 
        | {{/name}}
        h1 {{header}} 
        h2 {{#subheader}}({{subheader}}%){{/subheader}}
        br 
        h2 {{#^rollTotal() modifier 0}}Modifier: {{modifier}}% {{/^rollTotal() modifier 0}}
      | {{/header}}
      //- Display the dice roll in the template -
      .sheet-template-body
        | {{#dice}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{dice}}
            span.percent %
        | {{#rollTotal() dice 1}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 1}}
        | {{#rollBetween() dice 2 10}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 2 10}}
        | {{#rollTotal() dice 11}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 11}}
        | {{#rollBetween() dice 12 21}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 12 21}}
        | {{#rollTotal() dice 22}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 22}}
        | {{#rollBetween() dice 23 32}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 23 32}}
        | {{#rollTotal() dice 33}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 33}}
        | {{#rollBetween() dice 34 43}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 34 43}}
        | {{#rollTotal() dice 44}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 44}}
        | {{#rollBetween() dice 45 54}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 45 54}}
        | {{#rollTotal() dice 55}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 55}}
        | {{#rollBetween() dice 56 65}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 56 65}}
        | {{#rollTotal() dice 66}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 66}}
        | {{#rollBetween() dice 67 76}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 67 76}}
        | {{#rollTotal() dice 77}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 77}}
        | {{#rollBetween() dice 78 87}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 78 87}}
        | {{#rollTotal() dice 88}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 88}}
        | {{#rollBetween() dice 89 98}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Failure
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Success
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollBetween() dice 89 98}}
        | {{#rollTotal() dice 99}}
        | {{#rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        | {{/rollGreater() dice rating}}
        | {{#^rollGreater() dice rating}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/^rollGreater() dice rating}}
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 99}}         
        | {{#rollTotal() dice 100}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Fumble
        //- Damage die roll
        | {{#rollTotal() hasdamage 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{damage_critical}}
        | {{/rollTotal() hasdamage 1}}
        //- Lethality die roll
        | {{#rollTotal() haslethality 1}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality_critical}}
        | {{/rollTotal() haslethality 1}}
        | {{/rollTotal() dice 100}}
        | {{/dice}}
        
        //- Display a description. This is great for text included with a roll -
        | {{#desc}}
        .sheet-template-row.sheet-template-onerow
          span.sheet-template-desc {{desc}}
        | {{/desc}}	


.rolltemplates
  rolltemplate.sheet-rolltemplate-stats
    .sheet-template-container
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1 {{header}} 
        h2 {{#subheader}}({{subheader}}%){{/subheader}}
        br 
        h2 {{#^rollTotal() modifier 0}}Modifier: {{modifier}}% {{/^rollTotal() modifier 0}}
      | {{/header}}
      //- Display the dice roll in the template -
      .sheet-template-body
        | {{#dice}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{dice}}
          span.percent %
        | {{#rollLess() stat 20}}
        | {{#^rollGreater() dice score}}
        | {{#rollTotal() dice 1}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Critical
        | {{/rollTotal() dice 1}}
        | {{#rollBetween() dice 2 10}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 2 10}}
        | {{#rollTotal() dice 11}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 11}}
        | {{#rollBetween() dice 12 21}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 12 21}}
        | {{#rollTotal() dice 22}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 22}}
        | {{#rollBetween() dice 23 32}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 23 32}}
        | {{#rollTotal() dice 33}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 33}}
        | {{#rollBetween() dice 34 43}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 34 43}}
        | {{#rollTotal() dice 44}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 44}}
        | {{#rollBetween() dice 45 54}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 45 54}}
        | {{#rollTotal() dice 55}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 55}}
        | {{#rollBetween() dice 56 65}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 56 65}}
        | {{#rollTotal() dice 66}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 66}}
        | {{#rollBetween() dice 67 76}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 67 76}}
        | {{#rollTotal() dice 77}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 77}}
        | {{#rollBetween() dice 78 87}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 78 87}}
        | {{#rollTotal() dice 88}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 88}}
        | {{#rollBetween() dice 89 98}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 89 98}}
        | {{#rollTotal() dice 99}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 99}}         
        | {{/^rollGreater() dice score}}        
        | {{#rollGreater() dice score}}
        | {{#rollTotal() dice 100}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 100}}
        | {{#rollBetween() dice 2 10}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 2 10}}
        | {{#rollTotal() dice 11}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 11}}
        | {{#rollBetween() dice 12 21}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 12 21}}
        | {{#rollTotal() dice 22}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 22}}
        | {{#rollBetween() dice 23 32}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 23 32}}
        | {{#rollTotal() dice 33}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 33}}
        | {{#rollBetween() dice 34 43}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 34 43}}
        | {{#rollTotal() dice 44}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 44}}
        | {{#rollBetween() dice 45 54}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 45 54}}
        | {{#rollTotal() dice 55}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 55}}
        | {{#rollBetween() dice 56 65}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 56 65}}
        | {{#rollTotal() dice 66}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 66}}
        | {{#rollBetween() dice 67 76}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 67 76}}
        | {{#rollTotal() dice 77}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 77}}
        | {{#rollBetween() dice 78 87}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 78 87}}
        | {{#rollTotal() dice 88}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 88}}
        | {{#rollBetween() dice 89 98}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollBetween() dice 89 98}}
        | {{#rollTotal() dice 99}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 99}}         	
        | {{/rollGreater() dice score}}        
        | {{/rollLess() stat 20}}
        | {{#^rollLess() stat 20}}	
        | {{#^rollGreater() dice stat}}
        | {{#rollTotal() dice 100}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble  
        | {{/rollTotal() dice 100}}
        | {{#^rollTotal() dice 100}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical  
        | {{/^rollTotal() dice 100}}
        | {{/^rollGreater() dice stat}}
        | {{#rollGreater() dice stat}}
        | {{#rollBetween() dice 12 21}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 12 21}}
        | {{#rollTotal() dice 22}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 22}}
        | {{#rollBetween() dice 23 32}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 23 32}}
        | {{#rollTotal() dice 33}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 33}}
        | {{#rollBetween() dice 34 43}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 34 43}}
        | {{#rollTotal() dice 44}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 44}}
        | {{#rollBetween() dice 45 54}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 45 54}}
        | {{#rollTotal() dice 55}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 55}}
        | {{#rollBetween() dice 56 65}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 56 65}}
        | {{#rollTotal() dice 66}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 66}}
        | {{#rollBetween() dice 67 76}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 67 76}}
        | {{#rollTotal() dice 77}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 77}}
        | {{#rollBetween() dice 78 87}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 78 87}}
        | {{#rollTotal() dice 88}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 88}}
        | {{#rollBetween() dice 89 98}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/rollBetween() dice 89 98}}
        | {{#rollTotal() dice 99}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Critical
        | {{/rollTotal() dice 99}} 
        | {{#rollTotal() dice 100}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Fumble
        | {{/rollTotal() dice 100}} 
        | {{/rollGreater() dice stat}}
        | {{/^rollLess() stat 20}}
        | {{/dice}}
        //- Damage die roll
        | {{#damage}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{damage}}
        | {{/damage}}
        //- Display a description. This is great for text included with a roll -
        | {{#desc}}
        .sheet-template-row.sheet-template-onerow 
          span.sheet-template-desc {{desc}}
        | {{/desc}}	


.rolltemplates
  rolltemplate.sheet-rolltemplate-damage
    .sheet-template-container
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1 {{header}} 
        h2 {{#subheader}}({{subheader}}){{/subheader}}
      | {{/header}}
      //- Display the dice roll in the template -
      .sheet-template-body
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult {{damage}}
        |
        | {{#^rollTotal() AP 0}}
        .sheet-template-row.sheet-template-onerow
          span.inlinerollresult Armor Piercing: {{AP}}
        | {{/^rollTotal() AP 0}}

.rolltemplates
  rolltemplate.sheet-rolltemplate-lethality
    .sheet-template-container
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1 {{header}} 
        h2 ({{subheader}}%)
      | {{/header}}
      //- Display the dice roll in the template -
      .sheet-template-body
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
            span.percent %
        -const mult_norm = 1
        | {{#^rollGreater() lethality lethality_rating}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult DEATH
        each _, i in Array(100)
            +lethaldamageor(i+1,mult_norm)
        | {{/^rollGreater() lethality lethality_rating}}
        | {{#rollGreater() lethality lethality_rating}}
        each _, i in Array(100)
            +lethaldamage(i+1,mult_norm)
        | {{/rollGreater() lethality lethality_rating}}
        |
        | {{#^rollTotal() AP 0}}
        .sheet-template-row.sheet-template-tworows  
          span Armor Piercing:
          span.inlinerollresult {{AP}}
        | {{/^rollTotal() AP 0}}

 
.rolltemplates
  rolltemplate.sheet-rolltemplate-lethality_critical
    .sheet-template-container
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1 {{header}} 
        h2 ({{subheader}}%)
      | {{/header}}
      //- Display the dice roll in the template -
      .sheet-template-body
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{lethality}}
            span.percent %
        -const mult_crit = 2
        | {{#^rollGreater() lethality lethality_rating}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult DEATH
        each _, i in Array(100)
            +lethaldamageor(i+1,mult_crit)
        | {{/^rollGreater() lethality lethality_rating}}
        | {{#rollGreater() lethality lethality_rating}}
        each _, i in Array(100)
            +lethaldamage(i+1,mult_crit)
        | {{/rollGreater() lethality lethality_rating}}
        |
        | {{#^rollTotal() AP 0}}
        .sheet-template-row.sheet-template-tworows
          span Armor Piercing:
          span.inlinerollresult {{AP}}
        | {{/^rollTotal() AP 0}}
        


.rolltemplates
  rolltemplate.sheet-rolltemplate-sanloss
    .sheet-template-container
      //- Display a header on the template -
      .sheet-template-header
        h1 {{type}} 
        br
        h2 ( {{#rollTotal() hasminsan 1}}{{success}}{{/rollTotal() hasminsan 1}} {{#^rollTotal() hasminsan 1}}-{{/^rollTotal() hasminsan 1}} / {{#rollTotal() hasmaxsan 1}}{{failure}}{{/rollTotal() hasmaxsan 1}} {{#^rollTotal() hasmaxsan 1}}-{{/^rollTotal() hasmaxsan 1}}  )
      //- Display the dice roll in the template -
      .sheet-template-body
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{#rollTotal() hasminsan 1}}{{roll1}}{{/rollTotal() hasminsan 1}} {{#^rollTotal() hasminsan 1}}-{{/^rollTotal() hasminsan 1}} / {{#rollTotal() hasmaxsan 1}}{{roll2}}{{/rollTotal() hasmaxsan 1}} {{#^rollTotal() hasmaxsan 1}}-{{/^rollTotal() hasmaxsan 1}} 

.rolltemplates
  rolltemplate.sheet-rolltemplate-sanloss1
    .sheet-template-container
      //- Display a header on the template -
      .sheet-template-header
        h1 {{name}}
        h2  ({{subheader}}%)
        br
        h1 {{type}} 
        br
        h2 ( {{#rollTotal() hasminsan 1}}{{success}}{{/rollTotal() hasminsan 1}} {{#^rollTotal() hasminsan 1}}-{{/^rollTotal() hasminsan 1}} / {{#rollTotal() hasmaxsan 1}}{{failure}}{{/rollTotal() hasmaxsan 1}} {{#^rollTotal() hasmaxsan 1}}-{{/^rollTotal() hasmaxsan 1}}  )
        br 
        h2 {{#^rollTotal() modifier 0}} Modifier: {{modifier}}% {{/^rollTotal() modifier 0}}
      //- Display the dice roll in the template -
      .sheet-template-body
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{dice}}
            span.percent %
          - const criticals=[01, 11, 22, 33, 44, 55, 66, 77, 88, 99, 100]
          |
          | {{#^rollGreater() dice rating}}
          each val,i in criticals
              | {{#rollTotal() dice #{val}}}
              .sheet-template-row.sheet-template-onerow 
                span.inlinerollresult {{#rollTotal() hasminsan 1}}{{minloss}}{{/rollTotal() hasminsan 1}} {{#^rollTotal() hasminsan 1}}-{{/^rollTotal() hasminsan 1}}
              | {{/rollTotal() dice #{val}}}
              if (i<(criticals.length-2))
                 | {{#rollBetween() dice #{criticals[i]+1} #{criticals[i+1]-1}}}
                 .sheet-template-row.sheet-template-onerow 
                   span.inlinerollresult {{#rollTotal() hasminsan 1}}{{rsuccess}}{{/rollTotal() hasminsan 1}} {{#^rollTotal() hasminsan 1}}-{{/^rollTotal() hasminsan 1}}
                 | {{/rollBetween() dice #{criticals[i]+1} #{criticals[i+1]-1}}}
          | {{/^rollGreater() dice rating}}
          | {{#rollGreater() dice rating}}
          each val,i in criticals
              | {{#rollTotal() dice #{val}}}
              .sheet-template-row.sheet-template-onerow 
                span.inlinerollresult {{#rollTotal() hasmaxsan 1}}{{maxloss}}{{/rollTotal() hasmaxsan 1}} {{#^rollTotal() hasmaxsan 1}}-{{/^rollTotal() hasmaxsan 1}}
              | {{/rollTotal() dice #{val}}}
              if (i<(criticals.length-2))
                 | {{#rollBetween() dice #{criticals[i]+1} #{criticals[i+1]-1}}}
                 .sheet-template-row.sheet-template-onerow 
                   span.inlinerollresult {{#rollTotal() hasmaxsan 1}}{{rfailure}}{{/rollTotal() hasmaxsan 1}} {{#^rollTotal() hasmaxsan 1}}-{{/^rollTotal() hasmaxsan 1}}
                 | {{/rollBetween() dice #{criticals[i]+1} #{criticals[i+1]-1}}}
          | {{/rollGreater() dice rating}}

//        | {{#^rollGreater() dice rating}}
//        .sheet-template-row.sheet-template-onerow 
//          span.inlinerollresult {{#rollTotal() hasminsan 1}}{{rsuccess}}{{/rollTotal() hasminsan 1}} {{#^rollTotal() hasminsan 1}}-{{/^rollTotal() hasminsan 1}}
//        | {{/^rollGreater() dice rating}}
//        | {{#rollGreater() dice rating}}
//        .sheet-template-row.sheet-template-onerow 
//          span.inlinerollresult {{#rollTotal() hasmaxsan 1}}{{rfailure}}{{/rollTotal() hasmaxsan 1}} {{#^rollTotal() hasmaxsan 1}}-{{/^rollTotal() hasmaxsan 1}}
//        | {{/rollGreater() dice rating}}
 
.rolltemplates
  rolltemplate.sheet-rolltemplate-luck
    .sheet-template-container
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1 {{header}} 
        h2 {{#subheader}}({{subheader}}%){{/subheader}}
      | {{/header}}
      //- Display the dice roll in the template -
      .sheet-template-body
        | {{#dice}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{dice}}
            span.percent %
        | {{#rollGreater() dice 50}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Failure
        | {{/rollGreater() dice 50}}
        | {{#^rollGreater() dice 50}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Success
        | {{/^rollGreater() dice 50}}
        | {{/dice}}

.rolltemplates
  rolltemplate.sheet-rolltemplate-disorder
    .sheet-template-container
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1 {{header}} 
        h2 ({{subheader}}%)
      | {{/header}}
      //- Display the dice roll in the template -
      .sheet-template-body
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{rating}}
            span.percent %
        .sheet-template-row.sheet-template-onerow 
          | {{#rollGreater() dice rating}}
          span.inlinerollresult {{failure}}
          | {{/rollGreater() dice rating}}
          | {{#^rollGreater() dice rating}}
          span.inlinerollresult {{success}}
          | {{/^rollGreater() dice rating}}




.rolltemplates
  rolltemplate.sheet-rolltemplate-bonds
    .sheet-template-container
      //- Display a header on the template -
      | {{#name}}
      .sheet-template-superheader
        h2 {{name}}
      | {{/name}}
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1  {{header}} 
      | {{/header}}
      .sheet-template-body
        | {{#rollGreater() wpafter 0}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{full_loss}} SAN
        | {{/rollGreater() wpafter 0}}
        | {{#^rollGreater() wpafter 0}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult Cannot Repress or Project
        | {{/^rollGreater() wpafter 0}}
        .sheet-template-row.sheet-template-tworows 
          span.sheet-rolltitle WP: 
          span
            span.sheet-rollbefore.aligned-left {{wpbefore}}
            span.sheet-rolltext.aligned-left → 
            | {{#rollGreater() wpafter 0}}
            span.sheet-rollafter.aligned-left {{wpafter}}
            | {{/rollGreater() wpafter 0}}
            | {{#^rollGreater() wpafter 0}}
            span.sheet-rollafter.aligned-left 0
            | {{/^rollGreater() wpafter 0}}
        .sheet-template-row.sheet-template-tworows  
          span.sheet-rolltitle Bond: 
          span
            span.sheet-rollbefore.aligned-left {{bondbefore}}
            span.sheet-rolltext.aligned-left →
            | {{#rollGreater() bondafter 0}}
            span.sheet-rollafter.aligned-left {{bondafter}}
            | {{/rollGreater() bondafter 0}}
            | {{#^rollGreater() bondafter 0}}
            span.sheet-rollafter.aligned-left 0
            | {{/^rollGreater() bondafter 0}}
        | {{#rollGreater() wpafter 0}}
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{repress}}
        | {{/rollGreater() wpafter 0}}

.rolltemplates
  rolltemplate.sheet-rolltemplate-fancy-rolls
    .sheet-template-container
      //- Display a header on the template -
      | {{#name}}
      .sheet-template-superheader
        h2 {{name}}
      | {{/name}}
      //- Display a header on the template -
      | {{#header}}
      .sheet-template-header
        h1  {{header}} 
        h2 {{#subheader}}({{subheader}}%){{/subheader}}
      | {{/header}}
      //- Display the dice roll in the template -
      | {{#rollTotal() computed::zero_willpower 1}}
      .sheet-template-overlay-zero-wp
        .sheet-template-overlay-zero-wp90
          .sheet-template-body
            .sheet-template-row.sheet-template-onerow 
              span.inlinerollresult(data-i18n="Actions automatically fail at 0 willpower.") Actions automatically fail at 0 willpower.
            .sheet-template-row.sheet-template-onerow 
              span.sheet-template-outcome(data-i18n="failure") failure     
      | {{/rollTotal() computed::zero_willpower 1}}    
      
      | {{#rollTotal() computed::low_willpower 1}}
      .sheet-template-overlay-low-wp
        .sheet-template-overlay-low-wp90
          .sheet-template-body
            | {{#^rollTotal() computed::modifier 0}}
            .sheet-template-row.sheet-template-tworows
              span.sheet-rolltitle(data-i18n="low WP:") low WP:
              span.sheet-template-computed 
                span -20
            .sheet-template-row.sheet-template-tworows
              span.sheet-rolltitle(data-i18n="modifier:") modifier:
              span.sheet-template-computed 
                span {{computed::modifier}}
            | {{/^rollTotal() computed::modifier 0}}
            .sheet-template-row.sheet-template-onerow 
              span.inlinerollresult {{dice}}
              // SUCCESS
            | {{#rollTotal() computed::isSuccess 1}}
            | {{#rollTotal() computed::isCritical 1}}
            .sheet-template-row.sheet-template-onerow 
              span.sheet-template-outcome(data-i18n="critical") critical
            | {{/rollTotal() computed::isCritical 1}}
            | {{/rollTotal() computed::isSuccess 1}}
            
            | {{#rollTotal() computed::isSuccess 1}}
            | {{#rollTotal() computed::isCritical 0}}
            .sheet-template-row.sheet-template-onerow 
              span.sheet-template-outcome(data-i18n="success") success
            | {{/rollTotal() computed::isCritical 0}}
            | {{/rollTotal() computed::isSuccess 1}}
            
            
            
            | {{#rollTotal() computed::isSuccess 0}}
            | {{#rollTotal() computed::isCritical 1}}
            .sheet-template-row.sheet-template-onerow 
              span.sheet-template-outcome(data-i18n="fumble") fumble
            | {{/rollTotal() computed::isCritical 1}}
            | {{/rollTotal() computed::isSuccess 0}}


            
            | {{#rollTotal() computed::isSuccess 0}}
            | {{#rollTotal() computed::isCritical 0}}
            .sheet-template-row.sheet-template-onerow 
              span.sheet-template-outcome(data-i18n="failure") failure
            | {{/rollTotal() computed::isCritical 0}}
            | {{/rollTotal() computed::isSuccess 0}}

      | {{/rollTotal() computed::low_willpower 1}}
      
      | {{#rollTotal() computed::low_willpower 0}}
      | {{#rollTotal() computed::zero_willpower 0}}
      
      .sheet-template-body
        | {{#^rollTotal() computed::modifier 0}}
        .sheet-template-row.sheet-template-tworows
          span.sheet-rolltitle(data-i18n="modifier:") modifier:
          span.sheet-template-computed 
            span {{computed::modifier}}
        | {{/^rollTotal() computed::modifier 0}}
        
        .sheet-template-row.sheet-template-onerow 
          span.inlinerollresult {{dice}}
          // SUCCESS
        | {{#rollTotal() computed::isSuccess 1}}
        | {{#rollTotal() computed::isCritical 1}}
        .sheet-template-row.sheet-template-onerow 
          span.sheet-template-outcome(data-i18n="critical") critical
        | {{/rollTotal() computed::isCritical 1}}
        | {{/rollTotal() computed::isSuccess 1}}
        
        | {{#rollTotal() computed::isSuccess 1}}
        | {{#rollTotal() computed::isCritical 0}}
        .sheet-template-row.sheet-template-onerow 
          span.sheet-template-outcome(data-i18n="success") success
        | {{/rollTotal() computed::isCritical 0}}
        | {{/rollTotal() computed::isSuccess 1}}
        
        
        
        | {{#rollTotal() computed::isSuccess 0}}
        | {{#rollTotal() computed::isCritical 1}}
        .sheet-template-row.sheet-template-onerow 
          span.sheet-template-outcome(data-i18n="fumble") fumble
        | {{/rollTotal() computed::isCritical 1}}
        | {{/rollTotal() computed::isSuccess 0}}


        
        | {{#rollTotal() computed::isSuccess 0}}
        | {{#rollTotal() computed::isCritical 0}}
        .sheet-template-row.sheet-template-onerow 
          span.sheet-template-outcome(data-i18n="failure") failure
        | {{/rollTotal() computed::isCritical 0}}
        | {{/rollTotal() computed::isSuccess 0}}


      | {{/rollTotal() computed::zero_willpower 0}}
      | {{/rollTotal() computed::low_willpower 0}}
      
      
      