%displaynone {
  display: none;
}
%displayInlineGrid {
  display: inline-grid;
}

$sheets: (
  "character": "character",
  "holdings": "holdings",
  "feast-record": "feast record",
  "gamemaster-characters": "gamemaster characters",
  "npc": "npc",
  "entourage": "entourage",
  "treasure-record": "treasure record",
  "income-worksheet": "income worksheet",
  "land-record": "land record",
);

$characterSheets: "character", "holdings", "entourage";
$feastSheets: "feast record", "gamemaster characters";
$manorSheets: "treasure record", "income worksheet", "land record";

@each $className, $valueName in $sheets {
  div.#{$className} {
    @extend %displayInlineGrid;
  }

  input[name="attr_sheet_type"]:not([value="#{$valueName}"])
    ~ div.#{$className},
  input[name="attr_settings_toggle"][value="settings"] ~ div.#{$className} {
    @extend %displaynone;
  }
}

@each $characterSheet in $characterSheets {
  input[name="attr_sheet_type"][value="#{$characterSheet}"]
    ~ div.tabs
    div.type {
    grid-template-columns: repeat(4, 1fr);
  }

  @include tabHide($characterSheet, "feast");
  @include tabHide($characterSheet, "manor");
}

@each $feastSheet in $feastSheets {
  input[name="attr_sheet_type"][value="#{$feastSheet}"] ~ div.tabs div.type {
    grid-template-columns: repeat(3, 1fr);
  }

  @include tabHide($feastSheet, "character");
  @include tabHide($feastSheet, "manor");
}

@each $manorSheet in $manorSheets {
  input[name="attr_sheet_type"][value="#{$manorSheet}"] ~ div.tabs div.type {
    grid-template-columns: repeat(3, 1fr);
  }

  @include tabHide($manorSheet, "character");
  @include tabHide($manorSheet, "feast");
}

input[name="attr_sheet_type"][value="feast"]
  ~ div.tabs
  select[name="attr_character_type"] {
  @extend %displaynone;
}

$types: "knight";
@each $value in $types {
  input[name="attr_character_type"]:not([value="#{$value}"])
    ~ div.character
    div.col,
  input[name="attr_character_type"]:not([value="#{$value}"])
    ~ div.holdings
    div.col,
  input[name="attr_character_type"]:not([value="#{$value}"])
    ~ div.entourage
    div.row {
    & div.row .#{$value},
    & div.personal-data div.row .#{$value},
    & div.personality-traits .#{$value},
    & div.personality-traits div.row .#{$value},
    & div.equipment-carried .#{$value},
    & div.skills .#{$value},
    & div.squire .#{$value},
    & .#{$value},
    & div.combat-skills .#{$value},
    & div.horse div.row .#{$value},
    & div.sheeet-family-history div.row,
    & .#{$value},
    & div.col .#{$value} {
      @extend %displaynone;
    }
  }
}

div.settings {
  @extend %displayInlineGrid;
}

input[name="attr_settings_toggle"]:not([value="settings"]) ~ div.settings {
  @extend %displaynone;
}

input[name="attr_sheet_type"][value="npc"] ~ div.tabs div.type {
  visibility: hidden;
}

input.flag {
  z-index: 10;
  opacity: 0;
}

input.flag + span.pictos {
  align-self: center;
  justify-self: center;
}

input.flag:checked + span.pictos {
  color: $darkPrimary;
}

input.flag:checked ~ span.display,
input.flag:not(checked) ~ textarea,
input.flag:not(checked) ~ div.row input,
input.flag:not(checked) ~ div.notes textarea,
input.flag:checked ~ div.row span.display {
  display: none;
}

input.flag:not(checked) ~ span.display,
input.flag:checked ~ textarea,
input.flag:not(checked) ~ div.row span.display,
input.flag:checked ~ div.row input,
input.flag:checked ~ div.notes textarea {
  display: inherit;
}
