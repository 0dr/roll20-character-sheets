<fieldset class="repeating_spells-#REPLACE0#">
  <div style="display: flex; align-items: flex-end; justify-content: space-between">
    <table class="sheet-default-header-first-row sheet-inline-5" style="flex-grow: 5">
      <tr class="sheet-collapse sheet-show-first">
        <th>Spell name</th>
        <th>Range</th>
        <th>Area of effect</th>
        <th colspan="2">Casting time</th>
        <th colspan="2">Macro</th>
      </tr>
      <tr>
        <td class="sheet-td-dynamic50">
          <input type="text" name="attr_spell-name" title="@{repeating_spells-#REPLACE0#_$X_spell-name}" class="sheet-spell-big sheet-table-dynamic sheet-chrome" placeholder="Spell name" list="#REPLACE0#-spells">
          <input type="text" name="attr_spell-name" title="@{repeating_spells-#REPLACE0#_$X_spell-name}" class="sheet-spell-big sheet-table-dynamic sheet-firefox" placeholder="Spell name" list="#REPLACE0#-spells-ff">
        </td>
        <td class="sheet-td-dynamic25"><input type="text" name="attr_spell-range" title="@{repeating_spells-#REPLACE0#_$X_spell-range}" class="sheet-table-dynamic" placeholder="Range"></td>
        <td class="sheet-td-dynamic25"><input type="text" name="attr_spell-aoe" title="@{repeating_spells-#REPLACE0#_$X_spell-aoe}" class="sheet-table-dynamic" placeholder="Area of Effect"></td>
        <td><input type="text" name="attr_spell-cast-time" title="@{repeating_spells-#REPLACE0#_$X_spell-cast-time}" class="sheet-short" placeholder="Cast time"></td>
        <td><button type="roll" name="roll_spell-init" title="@{repeating_spells-#REPLACE0#_$X_spell-init}" value="/gmroll [[{([[1d10]]+@{spell-cast-time}-(@{misc-mod})), 1}kh1]] [Initiative (@{spell-name})]&{tracker}">Initiative</button></td>
        <td><button type="roll" name="roll_spell-template" title="%{repeating_spells-#REPLACE0#_$X_spell-template}" value="#REPLACE1#&{template:2Espell}{{title=@{spell-name}}}{{splevel=@{spell-level}}}{{school=@{spell-school}}}{{components=@{spell-components}}}{{time=@{spell-cast-time}}}{{range=@{spell-range}}}{{duration=@{spell-duration}}}{{aoe=@{spell-aoe}}}{{save=@{spell-saving-throw}}}{{subtlety=@{spell-subtlety}}}{{sensory=@{spell-sensory}}}{{knockdown=@{spell-knockdown}}}{{crit=@{spell-crit-size}}}{{damage=@{spell-damage}}}{{damagetype=@{spell-damage-type}}}{{healing=@{spell-healing}}}{{reference=@{spell-reference}}}{{materials=@{spell-materials}}}{{effects=@{spell-effect}}}">T</button></td>
        <td><button type="action" name="act_show" class="btn sheet-hidden sheet-show">▼</button><button type="action" name="act_hide" class="btn sheet-hidden">▲</button></td>
      </tr>
    </table>
    <table class="sheet-default-header-first-row">
      <tr class="sheet-collapse sheet-show-first">
        <th>Cast</th>
        <th></th>
        <th>Memorized</th>
      </tr>
      <tr>
        <td><input type="number" name="attr_spell-cast-value" title="@{repeating_spells-#REPLACE0#_$X_spell-cast-value}" value="0" class="sheet-short"></td>
        <td class="sheet-centering-padding-5">/</td>
        <td><input type="number" name="attr_spell-memorized" title="@{repeating_spells-#REPLACE0#_$X_spell-memorized}" value="0" class="sheet-short"></td>
      </tr>
    </table>
  </div>
  <div class="sheet-hidden">
    <div class="sheet-flex" style="justify-content: space-between; padding-left: 15px; padding-top: 5px; padding-bottom: 5px; column-gap: 10px;">
      <table class="sheet-default-header-odd-column" style="align-self: flex-start">
        <tr>
          <th>Level:</th>
          <td><input type="text" name="attr_spell-level" title="@{repeating_spells-#REPLACE0#_$X_spell-level}" class="sheet-table-dynamic" placeholder="Spell level"></td>
          <th>Sphere:</th>
          <td><input type="text" name="attr_spell-sphere" title="@{repeating_spells-#REPLACE0#_$X_spell-sphere}" class="sheet-spell-half" placeholder="Sphere"></td>
        </tr>
        <tr>
          <th>School:</th>
          <td><input type="text" name="attr_spell-school" title="@{repeating_spells-#REPLACE0#_$X_spell-school}" class="sheet-spell-half" placeholder="School"></td>
          <th>Components:</th>
          <td><input type="text" name="attr_spell-components" title="@{repeating_spells-#REPLACE0#_$X_spell-components}" class="sheet-spell-half" placeholder="Components"></td>
        </tr>
        <tr>
          <th>Duration:</th>
          <td><input type="text" name="attr_spell-duration" title="@{repeating_spells-#REPLACE0#_$X_spell-duration}" class="sheet-spell-half" placeholder="Duration"></td>
          <th style="white-space: nowrap">Saving Throw:</th>
          <td><input type="text" name="attr_spell-saving-throw" title="@{repeating_spells-#REPLACE0#_$X_spell-saving-throw}" class="sheet-spell-half" placeholder="Saving Throw"></td>
        </tr>
        <tr>
          <th>Subtlety:</th>
          <td><input type="text" name="attr_spell-subtlety" title="@{repeating_spells-#REPLACE0#_$X_spell-subtlety}" class="sheet-spell-half" placeholder="Subtlety"></td>
          <th>Knockdown:</th>
          <td><input type="text" name="attr_spell-knockdown" title="@{repeating_spells-#REPLACE0#_$X_spell-knockdown}" class="sheet-spell-half" placeholder="[[d6]]"></td>
        </tr>
        <tr>
          <th>Sensory:</th>
          <td><input type="text" name="attr_spell-sensory" title="@{repeating_spells-#REPLACE0#_$X_spell-sensory}" class="sheet-spell-half" placeholder="Sensory"></td>
          <th>Critical:</th>
          <td><input type="text" name="attr_spell-crit-size" title="@{repeating_spells-#REPLACE0#_$X_spell-crit-size}" class="sheet-spell-half" placeholder="Large (1d3 hits)" list="spell-crit-size"></td>
        </tr>
        <tr>
          <td colspan="3" style="background: transparent"></td>
          <td><button type="action" name="act_spell-crit2" class="btn sheet-action-button" title="%{repeating_spells-#REPLACE0#_$X_spell-crit2}">Critical Effect</button></td>
        </tr>
        <tr>
          <th>Damage:</th>
          <td><textarea type="text" name="attr_spell-damage" title="@{repeating_spells-#REPLACE0#_$X_spell-damage}" class="sheet-spell-half sheet-input-like" placeholder="[[Damage]]"></textarea></td>
          <th>Damage Type:</th>
          <td><input type="text" name="attr_spell-damage-type" title="@{repeating_spells-#REPLACE0#_$X_spell-damage-type}" class="sheet-spell-half" placeholder="Damage type" list="spell-damage-type"></td>
        </tr>
        <tr>
          <th>Healing:</th>
          <td colspan="3"><textarea type="text" name="attr_spell-healing" title="@{repeating_spells-#REPLACE0#_$X_spell-healing}" class="sheet-table-dynamic sheet-input-like" placeholder="[[Healing]]"></textarea></td>
        </tr>
        <tr>
          <th>Reference:</th>
          <td colspan="3"><input type="text" name="attr_spell-reference" title="@{repeating_spells-#REPLACE0#_$X_spell-reference}" class="sheet-table-dynamic" placeholder="Book Reference"></td>
        </tr>
        <tr>
          <th>Materials:</th>
          <td colspan="3"><textarea type="text" name="attr_spell-materials" title="@{repeating_spells-#REPLACE0#_$X_spell-materials}" class="sheet-table-dynamic sheet-input-like" placeholder="Materials"></textarea></td>
        </tr>
      </table>
      <textarea name="attr_spell-effect" title="@{repeating_spells-#REPLACE0#_$X_spell-effect}" placeholder="Insert Spell effects." style="height: unset; resize: vertical; margin-bottom: 0;"></textarea>
    </div>
  </div>
</fieldset>