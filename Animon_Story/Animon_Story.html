<!DOCTYPE html>

<html>
<div class="charsheet">
	<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab" value="character" />
	<div style="display: flex; flex-direction: row; justify-content: space-between;">
		<div>
			<button type="action" class="sheet-tabButton" name="act_character">Character</button>
			<button type="action" class="sheet-tabButton" name="act_action">Action</button>
			<button type="action" class="sheet-tabButton" name="act_animon">Animon</button>
			<button type="action" class="sheet-tabButton" name="act_option">Option</button>
		</div>
		<div>
			<select name="attr_rollWhisperType">
				<option value="" selected><span>Show rolls</span></option>
				<option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }"><span>Ask each time</span></option>
				<option value="/w gm"><span>Always whisper</span></option>
			</select>
		</div>
	</div>

	<div class="sheet-character sheet-tab">
		<section style="
			display: grid;
			grid-template-columns: repeat(2, 1fr);
		">
			<div style="
				display: flex;
				flex-flow: row;
				gap: 5px;
				grid-column: 1 / 3;
			">
				<article style="padding: 16px; flex: 0 0 auto;">
					<h1 style="align-items: center;">Kid</h1>
				</article>
				<article class="sheet-grid sheet-flexContent sheet-kid" style="
					flex: 1 1 auto;
					grid-template-columns: repeat(2, 1fr);
					grid-template-rows: repeat(3, 1fr);
					grid-auto-flow: column;
				">
					<div style="grid-column: 1 / 3; border-bottom: 2px solid gray;">
						<span>Kid Name:</span>
						<input type="text" name="attr_character_name" placeholder="Character Name" title="Enter the character's name" />
					</div>
					<div>
						<span>Virtue:</span>
						<input type="text" name="attr_virtue" placeholder="Virtue" title="Enter the character's virtue" />
					</div>
					<div>
						<span>Desire:</span>
						<input type="text" name="attr_desire" placeholder="Desire" title="Enter the character's desire" />
					</div>
					<div>
						<span>Flaw:</span>
						<input type="text" name="attr_flaw" placeholder="Flaw" title="Enter the character's flaw" />
					</div>
					<div>
						<span>Special Item:</span>
						<input type="text" name="attr_specialItem" placeholder="Special Item" title="Enter the character's special item" />
					</div>
				</article>
			</div>
			<article>
				<header>
					<h2>Traits</h2>
				</header>
				<div>
					<span>Logic</span>
					<input type="number" name="attr_trait_logic" value="0" />
					<button type="roll" name="act_roll_trait_logic" value="@{rollWhisperType} &{template:default} {{name=@{character_name} Logic}} {{attack=[[ [[@{trait_logic} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}" />
				</div>
				<div>
					<span>Reflex</span>
					<input type="number" name="attr_trait_reflex" value="0" />
					<button type="roll" name="act_roll_trait_reflex" value="@{rollWhisperType} &{template:default} {{name=@{character_name} Reflex}} {{attack=[[ [[@{trait_reflex} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}" />
				</div>
				<div>
					<span>Spirit</span>
					<input type="number" name="attr_trait_spirit" value="0" />
					<button type="roll" name="act_roll_trait_spirit" value="@{rollWhisperType} &{template:default} {{name=@{character_name} Spirit}} {{attack=[[ [[@{trait_spirit} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}" />
				</div>
			</article>
			<article>
				<header>
					<div>
						<h2>Kid Type:</h2>
						<input type="text" name="attr_kidType_name" placeholder="Kid Type" title="Enter the kid's type" />
					</div>
					<div>
						<legend>Type Feature:</legend>
						<input type="text" name="attr_kidType_name" placeholder="Name" title="Enter the kid's type name" />
						<textarea name="attr_kidType_feature" placeholder="" title="Describe the kid's type feature"></textarea>
					</div>
				</header>
			</article>
			<div>
				<article>
					<header>
						<h2>Stamina</h2>
					</header>
					<input type="number" name="attr_stamina" value="0" />
					<input type="hidden" name="attr_stamina_max" value="10" />
					<span name="attr_stamina_max"></span>
				</article>
				<article>
					<header>
						<h2>Harm</h2>
						<div>
							<span>Shaken</span>
							<input type="checkbox" name="attr_shaken" />
						</div>
					</header>
					<div>
						<div>
							<span>1.</span>
							<input type="text" name="attr_harm_1" placeholder="Harm name" />
						</div>
						<div>
							<span>2.</span>
							<input type="text" name="attr_harm_2" placeholder="Harm name" />
						</div>
						<div>
							<span>3.</span>
							<input type="text" name="attr_harm_3" placeholder="Harm name" />
						</div>
					</div>
				</article>
			</div>
			<article>
				<header>
					<h2>Talents:</h2>
					<h2>Rank:</h2>
				</header>
				<fieldset class="repeating_talent">
					<div class="repeating_talent_row">
						<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{character_name} @{talent_name}}} {{attack=[[ [[@{talent_rank} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}" />
						<input type="text" name="attr_talent_name" placeholder="Name" title="Talent's name" />
						<input type="number" name="attr_talent_rank" value="1" title="Talent's rank" />
					</div>
				</fieldset>
			</article>
			<article>
				<header>
					<h3>Relationships</h3>
				</header>
				<fieldset class="repeating_relationship">
					<div class="repeating_relationship_row">
						<input type="text" name="attr_relationship_target" placeholder="Target" />
						<textarea name="attr_relationship_description" placeholder="Description"></textarea>
					</div>
				</fieldset>
			</article>
			<article>
				<header>
					<h2>Stuff & Ani-Tool:</h2>
				</header>
				<fieldset class="repeating_stuff">
					<div class="repeating_stuff_row">
						<input type="text" name="attr_stuff_name" placeholder="Name" />
						<input type="number" name="attr_stuff_quantity" value="0" />
					</div>
					<div>
						<textarea name="attr_stuff_description" placeholder="Stuff description"></textarea>
					</div>
				</fieldset>
			</article>
			<article style="grid-column: 1 / 3;">
				<header>
					<h2>Notes</h2>
				</header>
				<fieldset class="repeating_note">
					<div class="repeating_note_row">
						<textarea name="attr_note" placeholder="Note"></textarea>
					</div>
				</fieldset>
			</article>
		</section>
	</div>

	<div class="sheet-action">
		<!-- Type feature, Special item, Talents, Flaw, Desire -->
		<section>
			<article>
				<header>
					<h2>Traits</h2>
				</header>
				<div>
					<span>Logic</span>
					<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{character_name} Logic}} {{attack=[[ [[@{trait_logic} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}"><span name="attr_trait_logic"></span></button>
				</div>
				<div>
					<span>Reflex</span>
					<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{character_name} Reflex}} {{attack=[[ [[@{trait_reflex} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}"><span name="attr_trait_reflex"></span></button>
				</div>
				<div>
					<span>Spirit</span>
					<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{character_name} Spirit}} {{attack=[[ [[@{trait_spirit} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}"><span name="attr_trait_spirit"></span></button>
				</div>
			</article>
			<article>
				<header>
					<div>
						<h2>Kid Type:</h2>
						<span name="attr_kidType_name"></span>
					</div>
					<div>
						<legend>Type Feature:</legend>
						<span name="attr_kidType_name" />
						<div>
							<span name="attr_kidType_feature" />
						</div>
					</div>
				</header>
			</article>
			<div>
				<article>
					<header>
						<h2>Stamina</h2>
					</header>
					<input type="number" name="attr_stamina" value="0" />
					<span name="attr_stamina_max"></span>
				</article>
				<article>
					<header>
						<h2>Harm</h2>
						<div>
							<span>Shaken</span>
							<input type="checkbox" name="attr_shaken" />
						</div>
					</header>
					<div>
						<div>
							<span>1.</span>
							<input type="text" name="attr_harm_1" placeholder="Harm name" />
						</div>
						<div>
							<span>2.</span>
							<input type="text" name="attr_harm_2" placeholder="Harm name" />
						</div>
						<div>
							<span>3.</span>
							<input type="text" name="attr_harm_3" placeholder="Harm name" />
						</div>
					</div>
				</article>
			</div>
			<article>
				<header>
					<h2>Talents:</h2>
					<h2>Rank:</h2>
				</header>
				<fieldset class="repeating_talent sheet-noModifs">
					<div class="repeating_talent_row">
						<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{character_name} @{talent_name}}} {{attack=[[ [[@{talent_rank} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}" />
						<span name="attr_talent_name" />
						<span name="attr_talent_rank" />
					</div>
				</fieldset>
			</article>
		</section>
		<div>
			<section>
				<article>
					<header>
						<h2>Bond Level</h2>
					</header>
					<input type="number" name="attr_bondLevel" value="1" />
				</article>
				<article>
					<header>
						<h2>XP</h2>
					</header>
					<div>
						<input type="checkbox" name="attr_xp_1" />
						<input type="checkbox" name="attr_xp_2" />
						<input type="checkbox" name="attr_xp_3" />
						<input type="checkbox" name="attr_xp_4" />
						<input type="checkbox" name="attr_xp_5" class="sheet-halfCircle" />
						<input type="checkbox" name="attr_xp_6" />
						<input type="checkbox" name="attr_xp_7" />
						<input type="checkbox" name="attr_xp_8" />
						<input type="checkbox" name="attr_xp_9" />
						<input type="checkbox" name="attr_xp_10" class="sheet-fullCircle" />
					</div>
				</article>
				<article>
					<header>
						<h2>Bond points</h2>
					</header>
					<input type="number" name="attr_bondPoints" value="0" />
					<input type="hidden" name="attr_bondPoints_max" value="6" />
					<span name="attr_bondPoints_max"></span>
				</article>
				<article>
					<header>
						<h2>Bond strain</h2>
					</header>
					<input type="number" name="attr_bondStrain" value="0" />
				</article>
				<article>
					<header>
						<h2 title="Single Attack Uses">Sig. Attack Uses</h2>
					</header>
					<input type="number" name="attr_sigAttackUses" value="0" />
					<input type="hidden" name="attr_sigAttackUses_max" value="1" />
					<span name="attr_sigAttackUses_max"></span>
				</article>
			</section>
			<section>
				<input type="hidden" name="attr_display_animon_evo" value="basic" />
				<article>
					<button type="action" name="act_animon_devolve">←</button>
					<h2>Animon:</h2>
					<div style="display: flex; flex-flow: column;">
						<div>
							<span>Stage:</span>
							<span name="attr_display_animon_evo" class="sheet-stage"></span>
						</div>
						<div>
							<span>Name:</span>
							<input type="hidden" name="attr_display_animon_name" />
							<span name="attr_display_animon_name"></span>
						</div>
						<div>
							<span>Nature:</span>
							<input type="hidden" name="attr_display_animon_nature" />
							<span name="attr_display_animon_nature"></span>
						</div>
						<div>
							<span>Class:</span>
							<input type="hidden" name="attr_display_animon_class" />
							<span name="attr_display_animon_class"></span>
						</div>
						<div>
							<span>Element:</span>
							<input type="hidden" name="attr_display_animon_element" />
							<span name="attr_display_animon_element"></span>
						</div>
						<div>
							<span>Heart:</span>
							<input type="hidden" name="attr_display_animon_heart" />
							<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{display_animon_name} Heart}} {{attack=[[ [[@{display_animon_heart} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}">
								<span name="attr_display_animon_heart"></span>
							</button>
						</div>
						<div>
							<span>Power:</span>
							<input type="hidden" name="attr_display_animon_power" />
							<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{display_animon_name} Power}} {{attack=[[ [[@{display_animon_power} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}">
								<span name="attr_display_animon_power"></span>
							</button>
						</div>
						<div>
							<span>Agility:</span>
							<input type="hidden" name="attr_display_animon_agility" />
							<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{display_animon_name} Agility}} {{attack=[[ [[@{display_animon_agility} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}">
								<span name="attr_display_animon_agility"></span>
							</button>
						</div>
						<div>
							<span>Brains:</span>
							<input type="hidden" name="attr_display_animon_brains" />
							<button type="roll" value="@{rollWhisperType} &{template:default} {{name=@{display_animon_name} Brains}} {{attack=[[ [[@{display_animon_brains} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}">
								<span name="attr_display_animon_brains"></span>
							</button>
						</div>
						<div>
							<span>HP:</span>
							<input type="hidden" name="attr_display_animon_hp" />
							<span name="attr_display_animon_hp"></span>
						</div>
						<div>
							<span>Damage:</span>
							<input type="hidden" name="attr_display_animon_damage" />
							<span name="attr_display_animon_damage"></span>
						</div>
						<div>
							<span>Dodge:</span>
							<input type="hidden" name="attr_display_animon_dodge" />
							<span name="attr_display_animon_dodge"></span>
						</div>
						<div>
							<span>Initiative:</span>
							<input type="hidden" name="attr_display_animon_initiative" />
							<button type="roll" value="@{rollWhisperType} &{template:default} &{tracker} {{name=@{display_animon_name} Initiative}} {{attack=[[ [[@{display_animon_initiative} + ?{Bonus dice|0}]]d6>?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}]]}}">
								<span name="attr_display_animon_initiative"></span>
							</button>
						</div>
						<div>
							<span>Sig. Attack:</span>
							<input type="hidden" name="attr_display_animon_sigAttack_name" />
							<span name="attr_display_animon_sigAttack_name"></span>
						</div>
						<div>
							<span>Rank:</span>
							<input type="hidden" name="attr_display_animon_sigAttack_rank" />
							<span name="attr_display_animon_sigAttack_rank"></span>
						</div>
						<div>
							<span>Element:</span>
							<input type="hidden" name="attr_display_animon_sigAttack_element" />
							<span name="attr_display_animon_sigAttack_element"></span>
						</div>
						<div>
							<span>Effect 1:</span>
							<input type="hidden" name="attr_display_animon_sigAttack_effect1" />
							<span name="attr_display_animon_sigAttack_effect1"></span>
						</div>
						<div>
							<span>Effect 2:</span>
							<input type="hidden" name="attr_display_animon_sigAttack_effect2" />
							<span name="attr_display_animon_sigAttack_effect2"></span>
						</div>
						<div>
							<span>Effect 3:</span>
							<input type="hidden" name="attr_display_animon_sigAttack_effect3" />
							<span name="attr_display_animon_sigAttack_effect3"></span>
						</div>
						<div>
							<span>Quality 1:</span>
							<input type="hidden" name="attr_display_animon_quality_1" />
							<span name="attr_display_animon_quality_1"></span>
						</div>
						<div>
							<span>Rank:</span>
							<input type="hidden" name="attr_display_animon_quality_1_rank" />
							<span name="attr_display_animon_quality_1_rank"></span>
						</div>
						<div>
							<span>Quality 2:</span>
							<input type="hidden" name="attr_display_animon_quality_2" />
							<span name="attr_display_animon_quality_2"></span>
						</div>
						<div>
							<span>Rank:</span>
							<input type="hidden" name="attr_display_animon_quality_2_rank" />
							<span name="attr_display_animon_quality_2_rank"></span>
						</div>
					</div>
					<button type="action" name="act_animon_evolve">→</button>
				</article>
			</section>
		</div>
	</div>

	<div class="sheet-animon">
		<section>
			<article>
				<h3 class="sheet-stage">Fledgling</h3>
			</article>
			<article>
				<span>Name:</span>
				<input type="text" name="attr_fledgling_animon_name" placeholder="Name" />
			</article>
			<article>
				<span>Nature:</span>
				<input type="text" name="attr_fledgling_animon_nature" placeholder="Nature" />
			</article>
			<article>
				<span>Class:</span>
				<input type="text" name="attr_fledgling_animon_class" placeholder="Class" />
			</article>
			<article>
				<span>Element:</span>
				<input type="text" name="attr_fledgling_animon_element" placeholder="Element" />
			</article>
			<article>
				<h2>Stats</h2>
				<div>
					<span>Heart</span>
					<input type="number" name="attr_fledgling_animon_heart" value="1" />
				</div>
				<div>
					<span>Power</span>
					<input type="number" name="attr_fledgling_animon_power" value="1" />
				</div>
				<div>
					<span>Agility</span>
					<input type="number" name="attr_fledgling_animon_agility" value="1" />
				</div>
				<div>
					<span>Brains</span>
					<input type="number" name="attr_fledgling_animon_brains" value="1" />
				</div>
			</article>
			<article>
				<h3>HP</h3>
				<div>
					<input type="number" name="attr_fledgling_animon_hp" value="0" />
					<input type="hidden" name="attr_fledgling_animon_hp_max" value="10" />
					<span name="attr_fledgling_animon_hp_max"></span>
				</div>
			</article>
			<article>
				<h3>Damage</h3>
				<div>
					<input type="number" name="attr_fledgling_animon_damage" value="0" />
				</div>
			</article>
			<article>
				<h3>Dodge</h3>
				<div>
					<input type="number" name="attr_fledgling_animon_dodge" value="0" />
				</div>
			</article>
			<article>
				<h3>Initiative</h3>
				<div>
					<input type="number" name="attr_fledgling_animon_initiative" value="0" />
				</div>
			</article>
			<input type="hidden" name="attr_fledgling_animon_sigAttack_name" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_rank" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_element" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_effect1" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_effect2" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_effect3" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_1" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_1_rank" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_2" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_2_rank" value="/" />
		</section>
		<section>
			<article>
				<h3 class="sheet-stage">Basic</h3>
			</article>
			<article>
				<h2>Stats</h2>
				<div>
					<span>Heart</span>
					<input type="number" name="attr_basic_animon_heart" value="1" />
				</div>
				<div>
					<span>Power</span>
					<input type="number" name="attr_basic_animon_power" value="1" />
				</div>
				<div>
					<span>Agility</span>
					<input type="number" name="attr_basic_animon_agility" value="1" />
				</div>
				<div>
					<span>Brains</span>
					<input type="number" name="attr_basic_animon_brains" value="1" />
				</div>
			</article>
			<article>
				<h3>HP</h3>
				<div>
					<input type="number" name="attr_basic_animon_hp" value="10" />
					<input type="hidden" name="attr_basic_animon_hp_max" value="10" />
					<span name="attr_basic_animon_hp_max"></span>
				</div>
			</article>
			<article>
				<h3>Damage</h3>
				<div>
					<input type="number" name="attr_basic_animon_damage" value="0" />
				</div>
			</article>
			<article>
				<h3>Dodge</h3>
				<div>
					<input type="number" name="attr_basic_animon_dodge" value="0" />
				</div>
			</article>
			<article>
				<h3>Initiative</h3>
				<div>
					<input type="number" name="attr_basic_animon_initiative" value="0" />
				</div>
			</article>
			<article>
				<span>Name</span>
				<input type="text" name="attr_basic_animon_name" placeholder="Name" />
			</article>
			<article>
				<span>Nature</span>
				<input type="text" name="attr_basic_animon_nature" placeholder="Nature" />
			</article>
			<div>
				<article>
					<h2>Class</h2>
					<input type="text" name="attr_basic_animon_class" placeholder="Class" />
				</article>
				<article>
					<h2>Element</h2>
					<input type="text" name="attr_basic_animon_element" placeholder="Element" />
				</article>
			</div>
			<article>
				<h2>Signature attack</h2>
				<div>
					<div>
						<span>Name:</span>
						<input type="text" name="attr_basic_animon_sigAttack_name" placeholder="Name" />
					</div>
					<div>
						<div>
							<span>Rank:</span>
							<input type="number" name="attr_basic_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<span>Element:</span>
							<input type="text" name="attr_basic_animon_sigAttack_element" placeholder="Element" />
						</div>
					</div>
					<div>
						<span>Effect 1)</span>
						<input type="text" name="attr_basic_animon_sigAttack_effect1" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 2)</span>
						<input type="text" name="attr_basic_animon_sigAttack_effect2" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 3)</span>
						<input type="text" name="attr_basic_animon_sigAttack_effect3" placeholder="Effect" />
					</div>
				</div>
			</article>
			<article>
				<div class="sheet-table">
					<div class="sheet-table-header">
						<div class="sheet-table-cell"></div>
						<div class="sheet-table-cell">Qualities:</div>
						<div class="sheet-table-cell">Rank:</div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>1.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_basic_animon_quality_1" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_basic_animon_quality_1_rank" value="1" /></div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>2.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_basic_animon_quality_2" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_basic_animon_quality_2_rank" value="1" /></div>
					</div>
				</div>
			</article>
		</section>
		<section>
			<article>
				<h3 class="sheet-stage">Super</h3>
			</article>
			<article>
				<h2>Stats</h2>
				<div>
					<span>Heart</span>
					<input type="number" name="attr_super_animon_heart" value="0" />
				</div>
				<div>
					<span>Power</span>
					<input type="number" name="attr_super_animon_power" value="0" />
				</div>
				<div>
					<span>Agility</span>
					<input type="number" name="attr_super_animon_agility" value="0" />
				</div>
				<div>
					<span>Brains</span>
					<input type="number" name="attr_super_animon_brains" value="0" />
				</div>
			</article>
			<article>
				<h3>HP</h3>
				<div>
					<input type="number" name="attr_super_animon_hp" value="0" />
					<input type="hidden" name="attr_super_animon_hp_max" value="10" />
					<span name="attr_super_animon_hp_max"></span>
				</div>
			</article>
			<article>
				<h3>Damage</h3>
				<div>
					<input type="number" name="attr_super_animon_damage" value="0" />
				</div>
			</article>
			<article>
				<h3>Dodge</h3>
				<div>
					<input type="number" name="attr_super_animon_dodge" value="0" />
				</div>
			</article>
			<article>
				<h3>Initiative</h3>
				<div>
					<input type="number" name="attr_super_animon_initiative" value="0" />
				</div>
			</article>
			<article>
				<span>Name</span>
				<input type="text" name="attr_super_animon_name" placeholder="Name" />
			</article>
			<article>
				<span>Nature</span>
				<input type="text" name="attr_super_animon_nature" placeholder="Nature" />
			</article>
			<div>
				<article>
					<h2>Class</h2>
					<input type="text" name="attr_super_animon_class" placeholder="Class" />
				</article>
				<article>
					<h2>Element</h2>
					<input type="text" name="attr_super_animon_element" placeholder="Element" />
				</article>
			</div>
			<article>
				<h2>Signature attack</h2>
				<div>
					<div>
						<span>Name:</span>
						<input type="text" name="attr_super_animon_sigAttack_name" placeholder="Name" />
					</div>
					<div>
						<div>
							<span>Rank:</span>
							<input type="number" name="attr_super_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<span>Element:</span>
							<input type="text" name="attr_super_animon_sigAttack_element" placeholder="Element" />
						</div>
					</div>
					<div>
						<span>Effect 1)</span>
						<input type="text" name="attr_super_animon_sigAttack_effect1" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 2)</span>
						<input type="text" name="attr_super_animon_sigAttack_effect2" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 3)</span>
						<input type="text" name="attr_super_animon_sigAttack_effect3" placeholder="Effect" />
					</div>
				</div>
			</article>
			<article>
				<div class="sheet-table">
					<div class="sheet-table-header">
						<div class="sheet-table-cell"></div>
						<div class="sheet-table-cell">Qualities:</div>
						<div class="sheet-table-cell">Rank:</div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>1.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_super_animon_quality_1" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_super_animon_quality_1_rank" value="1" /></div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>2.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_super_animon_quality_2" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_super_animon_quality_2_rank" value="1" /></div>
					</div>
				</div>
			</article>
		</section>
		<section>
			<article>
				<h3 class="sheet-stage">Ultra</h3>
			</article>
			<article>
				<h2>Stats</h2>
				<div>
					<span>Heart</span>
					<input type="number" name="attr_ultra_animon_heart" value="0" />
				</div>
				<div>
					<span>Power</span>
					<input type="number" name="attr_ultra_animon_power" value="0" />
				</div>
				<div>
					<span>Agility</span>
					<input type="number" name="attr_ultra_animon_agility" value="0" />
				</div>
				<div>
					<span>Brains</span>
					<input type="number" name="attr_ultra_animon_brains" value="0" />
				</div>
			</article>
			<article>
				<h3>HP</h3>
				<div>
					<input type="number" name="attr_ultra_animon_hp" value="0" />
					<input type="hidden" name="attr_ultra_animon_hp_max" value="10" />
					<span name="attr_ultra_animon_hp_max"></span>
				</div>
			</article>
			<article>
				<h3>Damage</h3>
				<div>
					<input type="number" name="attr_ultra_animon_damage" value="0" />
				</div>
			</article>
			<article>
				<h3>Dodge</h3>
				<div>
					<input type="number" name="attr_ultra_animon_dodge" value="0" />
				</div>
			</article>
			<article>
				<h3>Initiative</h3>
				<div>
					<input type="number" name="attr_ultra_animon_initiative" value="0" />
				</div>
			</article>
			<article>
				<span>Name</span>
				<input type="text" name="attr_ultra_animon_name" placeholder="Name" />
			</article>
			<article>
				<span>Nature</span>
				<input type="text" name="attr_ultra_animon_nature" placeholder="Nature" />
			</article>
			<div>
				<article>
					<h2>Class</h2>
					<input type="text" name="attr_ultra_animon_class" placeholder="Class" />
				</article>
				<article>
					<h2>Element</h2>
					<input type="text" name="attr_ultra_animon_element" placeholder="Element" />
				</article>
			</div>
			<article>
				<h2>Signature attack</h2>
				<div>
					<div>
						<span>Name:</span>
						<input type="text" name="attr_ultra_animon_sigAttack_name" placeholder="Name" />
					</div>
					<div>
						<div>
							<span>Rank:</span>
							<input type="number" name="attr_ultra_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<span>Element:</span>
							<input type="text" name="attr_ultra_animon_sigAttack_element" placeholder="Element" />
						</div>
					</div>
					<div>
						<span>Effect 1)</span>
						<input type="text" name="attr_ultra_animon_sigAttack_effect1" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 2)</span>
						<input type="text" name="attr_ultra_animon_sigAttack_effect2" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 3)</span>
						<input type="text" name="attr_ultra_animon_sigAttack_effect3" placeholder="Effect" />
					</div>
				</div>
			</article>
			<article>
				<div class="sheet-table">
					<div class="sheet-table-header">
						<div class="sheet-table-cell"></div>
						<div class="sheet-table-cell">Qualities:</div>
						<div class="sheet-table-cell">Rank:</div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>1.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_ultra_animon_quality_1" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_ultra_animon_quality_1_rank" value="1" /></div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>2.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_ultra_animon_quality_2" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_ultra_animon_quality_2_rank" value="1" /></div>
					</div>
				</div>
			</article>
		</section>
		<section>
			<article>
				<h3 class="sheet-stage">Giga</h3>
			</article>
			<article>
				<h2>Stats</h2>
				<div>
					<span>Heart</span>
					<input type="number" name="attr_giga_animon_heart" value="0" />
				</div>
				<div>
					<span>Power</span>
					<input type="number" name="attr_giga_animon_power" value="0" />
				</div>
				<div>
					<span>Agility</span>
					<input type="number" name="attr_giga_animon_agility" value="0" />
				</div>
				<div>
					<span>Brains</span>
					<input type="number" name="attr_giga_animon_brains" value="0" />
				</div>
			</article>
			<article>
				<h3>HP</h3>
				<div>
					<input type="number" name="attr_giga_animon_hp" value="0" />
					<input type="hidden" name="attr_giga_animon_hp_max" value="10" />
					<span name="attr_giga_animon_hp_max"></span>
				</div>
			</article>
			<article>
				<h3>Damage</h3>
				<div>
					<input type="number" name="attr_giga_animon_damage" value="0" />
				</div>
			</article>
			<article>
				<h3>Dodge</h3>
				<div>
					<input type="number" name="attr_giga_animon_dodge" value="0" />
				</div>
			</article>
			<article>
				<h3>Initiative</h3>
				<div>
					<input type="number" name="attr_giga_animon_initiative" value="0" />
				</div>
			</article>
			<article>
				<span>Name</span>
				<input type="text" name="attr_giga_animon_name" placeholder="Name" />
			</article>
			<article>
				<span>Nature</span>
				<input type="text" name="attr_giga_animon_nature" placeholder="Nature" />
			</article>
			<div>
				<article>
					<h2>Class</h2>
					<input type="text" name="attr_giga_animon_class" placeholder="Class" />
				</article>
				<article>
					<h2>Element</h2>
					<input type="text" name="attr_giga_animon_element" placeholder="Element" />
				</article>
			</div>
			<article>
				<h2>Signature attack</h2>
				<div>
					<div>
						<span>Name:</span>
						<input type="text" name="attr_giga_animon_sigAttack_name" placeholder="Name" />
					</div>
					<div>
						<div>
							<span>Rank:</span>
							<input type="number" name="attr_giga_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<span>Element:</span>
							<input type="text" name="attr_giga_animon_sigAttack_element" placeholder="Element" />
						</div>
					</div>
					<div>
						<span>Effect 1)</span>
						<input type="text" name="attr_giga_animon_sigAttack_effect1" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 2)</span>
						<input type="text" name="attr_giga_animon_sigAttack_effect2" placeholder="Effect" />
					</div>
					<div>
						<span>Effect 3)</span>
						<input type="text" name="attr_giga_animon_sigAttack_effect3" placeholder="Effect" />
					</div>
				</div>
			</article>
			<article>
				<div class="sheet-table">
					<div class="sheet-table-header">
						<div class="sheet-table-cell"></div>
						<div class="sheet-table-cell">Qualities:</div>
						<div class="sheet-table-cell">Rank:</div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>1.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_giga_animon_quality_1" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_giga_animon_quality_1_rank" value="1" /></div>
					</div>
					<div class="sheet-table-row">
						<div class="sheet-table-cell"><span>2.</span></div>
						<div class="sheet-table-cell"><input type="text" name="attr_giga_animon_quality_2" placeholder="Quality" /></div>
						<div class="sheet-table-cell"><input type="number" name="attr_giga_animon_quality_2_rank" value="1" /></div>
					</div>
				</div>
			</article>
		</section>
	</div>

	<div class="sheet-option">
		<section>
			<article>
				<h3>Roll type</h3>
				<div>
					<span>Roll visibility:</span>
					<select name="attr_rollWhisperType">
						<option value="" selected><span>Show rolls</span></option>
						<option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }"><span>Ask each time</span></option>
						<option value="/w gm"><span>Always whisper</span></option>
					</select>
				</div>
			</article>
			<article>
				<h3>Roll popup</h3>
				<div>
					<span>Pops every time:</span>
					<input type="checkbox" name="attr_rollPopup" />
				</div>
				<div>
					<span>Default bonus dice:</span>
					<input type="number" name="attr_defaultBonusDice" value="0" />
				</div>
				<div>
					<span>Default modifier:</span>
					<select name="attr_rollModifier">
						<option value="6">Double Setback</option>
						<option value="5">Setback</option>
						<option value="4" selected>Normal</option>
						<option value="3">Boost</option>
						<option value="2">Double Boost</option>
					</select>
				</div>
			</article>
		</section>
		<section>
			<article>
				<h3>Bonus HP</h3>
				<div>
					<span class="sheet-stage">Fledgling:</span>
					<input type="number" name="attr_bonusHP_fledgling" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Basic:</span>
					<input type="number" name="attr_bonusHP_basic" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Super:</span>
					<input type="number" name="attr_bonusHP_super" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Ultra:</span>
					<input type="number" name="attr_bonusHP_ultra" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Giga:</span>
					<input type="number" name="attr_bonusHP_giga" value="0" />
				</div>
			</article>
			<article>
				<h3>Bonus HP Multiplier</h3>
				<div>
					<span class="sheet-stage">Fledgling:</span>
					<input type="number" name="attr_bonusHPMultiplier_fledgling" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Basic:</span>
					<input type="number" name="attr_bonusHPMultiplier_basic" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Super:</span>
					<input type="number" name="attr_bonusHPMultiplier_super" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Ultra:</span>
					<input type="number" name="attr_bonusHPMultiplier_ultra" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Giga:</span>
					<input type="number" name="attr_bonusHPMultiplier_giga" value="0" />
				</div>
			</article>
			<article>
				<h3>Bonus Damage</h3>
				<div>
					<span class="sheet-stage">Fledgling:</span>
					<input type="number" name="attr_bonusDamage_fledgling" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Basic:</span>
					<input type="number" name="attr_bonusDamage_basic" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Super:</span>
					<input type="number" name="attr_bonusDamage_super" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Ultra:</span>
					<input type="number" name="attr_bonusDamage_ultra" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Giga:</span>
					<input type="number" name="attr_bonusDamage_giga" value="0" />
				</div>
			</article>
			<article>
				<h3>Bonus Damage Multiplier</h3>
				<div>
					<span class="sheet-stage">Fledgling:</span>
					<input type="number" name="attr_bonusDamageMultiplier_fledgling" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Basic:</span>
					<input type="number" name="attr_bonusDamageMultiplier_basic" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Super:</span>
					<input type="number" name="attr_bonusDamageMultiplier_super" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Ultra:</span>
					<input type="number" name="attr_bonusDamageMultiplier_ultra" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Giga:</span>
					<input type="number" name="attr_bonusDamageMultiplier_giga" value="0" />
				</div>
			</article>
			<article>
				<h3>Bonus Dodge</h3>
				<div>
					<span class="sheet-stage">Fledgling:</span>
					<input type="number" name="attr_bonusDodge_fledgling" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Basic:</span>
					<input type="number" name="attr_bonusDodge_basic" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Super:</span>
					<input type="number" name="attr_bonusDodge_super" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Ultra:</span>
					<input type="number" name="attr_bonusDodge_ultra" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Giga:</span>
					<input type="number" name="attr_bonusDodge_giga" value="0" />
				</div>
			</article>
			<article>
				<h3>Bonus Initiative</h3>
				<div>
					<span class="sheet-stage">Fledgling:</span>
					<input type="number" name="attr_bonusInitiative_fledgling" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Basic:</span>
					<input type="number" name="attr_bonusInitiative_basic" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Super:</span>
					<input type="number" name="attr_bonusInitiative_super" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Ultra:</span>
					<input type="number" name="attr_bonusInitiative_ultra" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Giga:</span>
					<input type="number" name="attr_bonusInitiative_giga" value="0" />
				</div>
			</article>
			<article>
				<h3>Bonus Sig. Attack</h3>
				<div>
					<span class="sheet-stage">Fledgling:</span>
					<input type="number" name="attr_bonusSigAttack_fledgling" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Basic:</span>
					<input type="number" name="attr_bonusSigAttack_basic" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Super:</span>
					<input type="number" name="attr_bonusSigAttack_super" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Ultra:</span>
					<input type="number" name="attr_bonusSigAttack_ultra" value="0" />
				</div>
				<div>
					<span class="sheet-stage">Giga:</span>
					<input type="number" name="attr_bonusSigAttack_giga" value="0" />
				</div>
			</article>
		</section>
	</div>
</div>

<script type="text/worker">
	const buttonList = ["character", "action", "animon", "option"];
	buttonList.forEach(button => {
		on(`clicked:${button}`, function() {
			setAttrs({sheetTab: button});
		});
	});

	const animonLevels = ["fledgling", "basic", "super", "ultra", "giga"];
	const maxValues = {
		maxAttr: [3, 4, 5, 6, 6],
		hp: [0, 5, 10, 15, 20],
		hpMult: [3, 3, 4, 5, 6],
		damage: [1, 2, 2, 3, 4],
	};

	on("clicked:animon_evolve clicked:animon_devolve", function(eventInfo) {
		const delta = eventInfo.htmlAttributes.name === "act_animon_evolve" ? 1 : -1;
		getAttrs(["display_animon_evo"], function(values) {
			var output = {};
			const evo = values["display_animon_evo"];
			const newEvo = (animonLevels.indexOf(evo) + delta + animonLevels.length) % animonLevels.length;
			const evoStage = animonLevels[newEvo];

			output["display_animon_evo"] = evoStage;

			setAttrs(output, {silent: false});
		});
	});

	on("change:display_animon_evo", function(eventInfo) {
		const evoStage = eventInfo.newValue;

		var attrs_to_get = [
			`${evoStage}_animon_name`,
			`${evoStage}_animon_nature`,
			`${evoStage}_animon_class`,
			`${evoStage}_animon_element`,
			`${evoStage}_animon_heart`,
			`${evoStage}_animon_power`,
			`${evoStage}_animon_agility`,
			`${evoStage}_animon_brains`,
			`${evoStage}_animon_hp`,
			`${evoStage}_animon_damage`,
			`${evoStage}_animon_dodge`,
			`${evoStage}_animon_initiative`,
			`${evoStage}_animon_sigAttack_name`,
			`${evoStage}_animon_sigAttack_rank`,
			`${evoStage}_animon_sigAttack_element`,
			`${evoStage}_animon_sigAttack_effect1`,
			`${evoStage}_animon_sigAttack_effect2`,
			`${evoStage}_animon_sigAttack_effect3`,
			`${evoStage}_animon_quality_1`,
			`${evoStage}_animon_quality_1_rank`,
			`${evoStage}_animon_quality_2`,
			`${evoStage}_animon_quality_2_rank`
		];

		getAttrs(attrs_to_get, function(values) {
			var output = {};

			const name = values[`${evoStage}_animon_name`];
			const nature = values[`${evoStage}_animon_nature`];
			const animonClass = values[`${evoStage}_animon_class`];
			const element = values[`${evoStage}_animon_element`];
			const heart = values[`${evoStage}_animon_heart`];
			const power = values[`${evoStage}_animon_power`];
			const agility = values[`${evoStage}_animon_agility`];
			const brains = values[`${evoStage}_animon_brains`];
			const hp = values[`${evoStage}_animon_hp`];
			const damage = values[`${evoStage}_animon_damage`];
			const dodge = values[`${evoStage}_animon_dodge`];
			const initiative = values[`${evoStage}_animon_initiative`];
			const sigAttackName = values[`${evoStage}_animon_sigAttack_name`];
			const sigAttackRank = values[`${evoStage}_animon_sigAttack_rank`];
			const sigAttackElement = values[`${evoStage}_animon_sigAttack_element`];
			const sigAttackEffect1 = values[`${evoStage}_animon_sigAttack_effect1`];
			const sigAttackEffect2 = values[`${evoStage}_animon_sigAttack_effect2`];
			const sigAttackEffect3 = values[`${evoStage}_animon_sigAttack_effect3`];
			const quality1 = values[`${evoStage}_animon_quality_1`];
			const quality1Rank = values[`${evoStage}_animon_quality_1_rank`];
			const quality2 = values[`${evoStage}_animon_quality_2`];
			const quality2Rank = values[`${evoStage}_animon_quality_2_rank`];

			output["display_animon_name"] = name;
			output["display_animon_nature"] = nature;
			output["display_animon_class"] = animonClass;
			output["display_animon_element"] = element;
			output["display_animon_heart"] = heart;
			output["display_animon_power"] = power;
			output["display_animon_agility"] = agility;
			output["display_animon_brains"] = brains;
			output["display_animon_hp"] = hp;
			output["display_animon_damage"] = damage;
			output["display_animon_dodge"] = dodge;
			output["display_animon_initiative"] = initiative;
			output["display_animon_sigAttack_name"] = sigAttackName;
			output["display_animon_sigAttack_rank"] = sigAttackRank;
			output["display_animon_sigAttack_element"] = sigAttackElement;
			output["display_animon_sigAttack_effect1"] = sigAttackEffect1;
			output["display_animon_sigAttack_effect2"] = sigAttackEffect2;
			output["display_animon_sigAttack_effect3"] = sigAttackEffect3;
			output["display_animon_quality_1"] = quality1;
			output["display_animon_quality_1_rank"] = quality1Rank;
			output["display_animon_quality_2"] = quality2;
			output["display_animon_quality_2_rank"] = quality2Rank;

			setAttrs(output, {silent: false});
		});
	});

	on("change:display_animon_brains", function(eventInfo) {
		const oldBrains = parseInt(eventInfo.previousValue);
		const newBrains = parseInt(eventInfo.newValue);

		getAttrs(["sigAttackUses"], function(values) {
			var output = {};

			const sigAttackUses = parseInt(values["sigAttackUses"]);
			const missingUses = oldBrains - sigAttackUses;
			const newUses = newBrains - missingUses;

			output["sigAttackUses"] = newUses;
			output["sigAttackUses_max"] = newBrains;

			setAttrs(output, {silent: true});
		});
	});

	animonLevels.forEach((level, index) => {
		on(`change:${level}_animon_heart change:bonusHP_${level} change:bonusHPMultiplier_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_heart`, `bonusHP_${level}`, `bonusHPMultiplier_${level}`], function(values) {
				const heart = Math.max(1, Math.min(maxValues.maxAttr[index], parseInt(values[`${level}_animon_heart`])));
				const bonusHp = parseInt(values[`bonusHP_${level}`]);
				const heartMult = parseInt(values[`bonusHPMultiplier_${level}`]);
				setAttrs({
					[`${level}_animon_heart`]: heart,
					[`${level}_animon_hp_max`]: bonusHp + maxValues.hp[0] + heart * (maxValues.hpMult[0] + heartMult)
				}, {silent: true});
			});
		});

		on(`change:${level}_animon_power change:bonusDamage_${level} change:bonusDamageMultiplier_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_power`, `bonusDamage_${level}`, `bonusDamageMultiplier_${level}`], function(values) {
				const power = Math.max(1, Math.min(maxValues.maxAttr[index], parseInt(values[`${level}_animon_power`])));
				const bonusDamage = parseInt(values[`bonusDamage_${level}`]);
				const powerMult = parseInt(values[`bonusDamageMultiplier_${level}`]);
				setAttrs({
					[`${level}_animon_power`]: power,
					[`${level}_animon_damage`]: bonusDamage + power * (powerMult + maxValues.damage[index])
				}, {silent: true});
			});
		});

		on(`change:${level}_animon_agility change:bonusDodge_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_agility`, `bonusDodge_${level}`], function(values) {
				const agility = Math.max(1, Math.min(maxValues.maxAttr[index], parseInt(values[`${level}_animon_agility`])));
				const bonusDodge = parseInt(values[`bonusDodge_${level}`]);
				setAttrs({
					[`${level}_animon_agility`]: agility,
					[`${level}_animon_dodge`]: bonusDodge + agility
				}, {silent: true});
			});
		});

		on(`change:${level}_animon_brains change:bonusInitiative_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_brains`, `bonusInitiative_${level}`], function(values) {
				const brains = Math.max(1, Math.min(maxValues.maxAttr[index], parseInt(values[`${level}_animon_brains`])));
				const bonusInitiative = parseInt(values[`bonusInitiative_${level}`]);
				setAttrs({
					[`${level}_animon_brains`]: brains,
					[`${level}_animon_initiative`]: bonusInitiative + brains
				}, {silent: true});
			});
		});
	});

	on("change:bondLevel", function(eventInfo) {
		var output = {};

		const bondLevel = parseInt(eventInfo.newValue);
		const bondPointsMax = 5 + bondLevel;
		const staminaMax = 9 + bondLevel;

		output["bondPoints_max"] = bondPointsMax;
		output["stamina_max"] = staminaMax;

		setAttrs(output, {silent: true});
	});
</script>
</html>
