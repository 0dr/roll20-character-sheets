@import 'variables.scss';

/* Mixin for bubble styling */
@mixin bubble-styling($size, $font-size, $text-indent, $opacity: 1, $content: "•") {
  border: solid 1px #000000;
  line-height: 11px;
  text-align: center;
  display: inline-block;
  vertical-align: middle;
  box-shadow: 0 0 0px #000;
  background: radial-gradient(#f6f6f6, #dfdfdf);
  content: $content;
  width: $size;
  height: $size;
  font-size: $font-size;
  font-family: $font_family_3;
  text-indent: $text-indent;
  border-radius: 50%;
  margin-right: -4px;
  opacity: $opacity;
}

/* Bubble Styling */
input[type="radio"].sheet-normal {
  position: absolute;
  opacity: 0;
  width: 10px;
  cursor: pointer;
  z-index: 10;
  margin-top: 5px;
  margin-right: -4px;

  & + span::before {
    @include bubble-styling(8px, 40.9px, -3px);
  }

  &:checked ~ input[type="radio"] + span::before {
    content: "";
  }
}

input.sheet-zero {
  &:checked + span::before {
    opacity: 0;
  }

  &:hover + span::before {
    @include bubble-styling(8px, 12px, -1px, 0.25, "✖");
  }

  & + span::before {
    opacity: 0;
  }
}

/* Advancement Flags */
@for $i from 0 through 9 {
  .sheet-advancement-flag[value="#{$i}"] ~ .sheet-advancement-pass .sheet-#{$i},
  .sheet-advancement-flag[value="#{$i}"] ~ .sheet-advancement-fail .sheet-#{$i} {
    display: inline-block;
  }

  @for $j from 1 through $i {
    .sheet-advancement-flag[value="#{$i}"] ~ .sheet-advancement-pass .sheet-#{$j},
    .sheet-advancement-flag[value="#{$i}"] ~ .sheet-advancement-fail .sheet-#{$j} {
      display: inline-block;
    }
  }

  @if $i < 10 {
    .sheet-advancement-flag.sheet-max10[value="#{$i}"] ~ .sheet-advancement-pass .sheet-#{$i},
    .sheet-advancement-flag.sheet-max10[value="#{$i}"] ~ .sheet-advancement-fail .sheet-#{$i} {
      display: inline-block;
    }
  }
}

.sheet-advancement-flag[value="0"]:not(.sheet-max10) ~ .sheet-advancement-pass,
.sheet-advancement-flag[value="0"]:not(.sheet-max10) ~ .sheet-advancement-fail,
.sheet-advancement-flag:not([value="0"]) ~ .sheet-beginner-checks {
  display: none;
}

/* Advancement Checkbox */
.sheet-advancement-checkbox {
  position: absolute;
  right: 0;
  top: 0;
  width: 15px;
  height: 15px;

  input[type="checkbox"] {
    opacity: 0;
    cursor: pointer;
    z-index: 10;
    height: 15px;

    & + span {
      background: url("https://i.imgur.com/lz44L8d.png");
      background-size: 100% 100%;
    }
  }
}

/* Untaxed Nature and Roll Type */
@for $i from 1 through 9 {
  .sheet-untaxed_nature[value="#{$i}"] ~ div .sheet-beginner-checks .sheet-#{$i} {
    display: inline-block;
  }

  @for $j from 1 through $i {
    .sheet-untaxed_nature[value="#{$i}"] ~ div .sheet-beginner-checks .sheet-#{$j} {
      display: inline-block;
    }
  }

  .sheet-show-advancement[value="#{$i}"] ~ .sheet-advancement-checkbox,
  .sheet-roll_type[value="simple"] ~ div .sheet-beginner_luck_flag[value="#{$i}"] ~ .sheet-simple_roll.sheet-beginner_luck,
  .sheet-roll_type[value="complex"] ~ div .sheet-complex_roll {
    display: inline-block;
  }
}
